(self.webpackChunkvuetest2=self.webpackChunkvuetest2||[]).push([[618],{6411:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var i=a(3645),n=a.n(i)()((function(e){return e[1]}));n.push([e.id,"@import url(//unpkg.com/element-ui@2.15.0/lib/theme-chalk/index.css);"]),n.push([e.id,".InterfaceBlock[data-v-8dbb825c]{width:80% !important;position:relative;margin-bottom:20px}.shortList[data-v-8dbb825c]{min-width:100px}.sectionBlock[data-v-8dbb825c]{border-bottom:2px solid #4393cc}.section-line[data-v-8dbb825c]{display:inline-block;width:100%;padding:8px 12px;margin-bottom:7px;margin-top:0;line-height:normal}.itemLabel[data-v-8dbb825c]{font-size:16px;font-weight:400;margin-right:5px}.flexcols[data-v-8dbb825c]{display:flex;flex-direction:row;flex-wrap:wrap;width:100%}.flex-item[data-v-8dbb825c]{display:flex;padding:15px 10px;flex-direction:column;flex-basis:100%;flex:1}.flex-item+.flex-item[data-v-8dbb825c]{margin-left:4%}.vue-ip[data-v-8dbb825c]{border:1px solid #000 !important}.vue-ip .segment[data-v-8dbb825c]{border:1px solid #000 !important}.iptab[data-v-8dbb825c]{border-spacing:10px 15px}.block_dropper[data-v-8dbb825c]{position:absolute;top:0px;right:5px;cursor:pointer;font-size:48px}.collapsedTitle[data-v-8dbb825c]{font-size:22px;font-weight:bold;padding:7px 12px;display:none}.collapse[data-v-8dbb825c]{display:none}.collapsed[data-v-8dbb825c]{display:block}.btnPanel[data-v-8dbb825c]{display:inline-block;position:absolute;bottom:5px;right:10px;margin-right:10px;width:250px}.btnPanel>span[data-v-8dbb825c]{display:inline-block}.btnPanel button[data-v-8dbb825c]{display:inline-block;width:100px}.success[data-v-8dbb825c]{background-color:#4caf50 !important;border-color:#4caf50 !important}",""]);const s=n},4696:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var i=a(3645),n=a.n(i)()((function(e){return e[1]}));n.push([e.id,".IpInput[data-v-6b5b1755]{display:inline-block}.IpInput .ipsegment[data-v-6b5b1755]{display:inline-block;width:45px;height:24px;padding:2px;border:1px solid #000}.IpInput .ipsegment input[data-v-6b5b1755]{width:100%;height:100%;font-size:14px;font-weight:500;border:none;outline:none;background-color:transparent}.IpInput .ipsegment input[data-v-6b5b1755]:disabled{font-weight:400;color:#333}.IpInput .ipseparator[data-v-6b5b1755]{margin:0px 2px}",""]);const s=n},3605:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var i=a(3645),n=a.n(i)()((function(e){return e[1]}));n.push([e.id,".InterfaceContainer[data-v-442ad2d2]{margin-top:30px}.InterfaceContainer>div:nth-child(odd) .InterfaceBlock[data-v-442ad2d2]{background-color:#93f3fa}.InterfaceContainer>div:nth-child(even) .InterfaceBlock[data-v-442ad2d2]{background-color:#d9b9fa}.InterfaceWrapper[data-v-442ad2d2]{position:relative;padding-top:0px}.btn-top[data-v-442ad2d2]{text-align:right;height:30px;top:0px;font-size:20px !important;width:80%;margin-bottom:15px}.btn-top button[data-v-442ad2d2]{right:10px;width:140px;font-size:20px !important;top:0px;display:inline-block}",""]);const s=n},6636:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>I});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"InterfaceWrapper"},[a("div",{staticClass:"btn-top"},[a("el-button",{staticClass:"el-button el-button--primary",attrs:{type:"button"},on:{click:e.addBlock}},[a("i",{staticClass:"el-icon-circle-plus"}),e._v("Add")])],1),e._v(" "),a("div",{staticClass:"InterfaceContainer"},e._l(e.interfaces,(function(t,i){return a("div",[e.isEnabled(t)?a("InterfaceBlock",{key:t.name,attrs:{indx:i,isCollapsed:i>0,iData:t,iName:t.name,allInterfaces:e.getInterfaces()}},[e._v(e._s(t.name))]):e._e()],1)})),0)])};i._withStripped=!0,a(561),a(8309);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"InterfaceBlock",attrs:{"element-loading-text":"Loading...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[a("div",{staticClass:"collapsedTitle",class:{collapsed:e.isCollapse}},[a("i",{staticClass:"fa fa-server",staticStyle:{"margin-right":"4px"}}),e._v(e._s(e.getLanName(e.iName)))]),e._v(" "),a("span",{staticClass:" fa",class:{"fa fa-caret-down":!e.isCollapse,block_dropper:!0,block_dropper:!0,"fa fa-caret-left":e.isCollapse},on:{click:e.collapseBlock}}),e._v(" "),a("div",{class:{"interface-block-wrapper":!0,collapse:e.isCollapse}},[a("div",{staticClass:"sectionBlock"},[a("p",{staticClass:"section-line"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.interfaceIndx,expression:"interfaceIndx"}],staticClass:"shortList",attrs:{id:"InterfacesLan"},domProps:{value:e.interfaceIndx},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.interfaceIndx=t.target.multiple?a:a[0]},function(t){return e.changeIndex(e.indx,t)}]}},e._l(e.allInterfaces,(function(t,i){return a("option",{domProps:{value:i}},[e._v(e._s(e.getLanName(t.name)))])})),0),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.protocolType,expression:"protocolType"}],staticClass:"shortList",attrs:{disabled:!e.editMode,id:"InterfacesProtocol"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.protocolType=t.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"WAN"}},[e._v("WAN")]),a("option",{attrs:{value:"Local"}},[e._v("Local")])])]),e._v(" "),a("p",{staticClass:"section-line"},[a("label",{staticClass:"itemLabel"},[e._v("Protocol:")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.protocol,expression:"protocol"}],attrs:{disabled:!e.editMode},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.protocol=t.target.multiple?a:a[0]}}},e._l(e.protocols,(function(t){return a("option",{domProps:{value:t.val}},[e._v(e._s(t.title))])})),0)])]),e._v(" "),a("div",{staticClass:"flexcols"},[a("div",{staticClass:"flex-item"},[a("table",{staticClass:"iptab"},[a("tr",[e._m(0),a("td",[a("ip-input",{attrs:{disabled:e.editMode,ip:e.ipv4addr_placeholder,segments:4,segmentMaxSize:3},model:{value:e.ipv4addr,callback:function(t){e.ipv4addr=t},expression:"ipv4addr"}})],1)]),e._v(" "),a("tr",[e._m(1),a("td",[a("ip-input",{attrs:{disabled:e.editMode,ip:e.ipvnetmask_placeholder,segments:4,segmentMaxSize:3},model:{value:e.ipvnetmask,callback:function(t){e.ipvnetmask=t},expression:"ipvnetmask"}})],1)]),e._v(" "),a("tr",[e._m(2),a("td",[a("ip-input",{attrs:{disabled:e.editMode,ip:e.ipv4gateway_placeholder,segments:4,segmentMaxSize:3},model:{value:e.ipv4gateway,callback:function(t){e.ipv4gateway=t},expression:"ipv4gateway"}})],1)]),e._v(" "),a("tr",[e._m(3),a("td",[a("ip-input",{attrs:{disabled:e.editMode,segments:4,segmentMaxSize:3},model:{value:e.resolv,callback:function(t){e.resolv=t},expression:"resolv"}})],1)])])]),e._v(" "),a("div",{staticClass:"flex-item"},[a("p",{staticClass:"section-line"},[a("label",{staticClass:"itemLabel"},[e._v("Override MAC address ")]),a("ip-input",{attrs:{disabled:e.editMode,segments:6,allowedregexp:"[a-fA-F0-9]",segmentMaxSize:2},model:{value:e.overrideMacAddr,callback:function(t){e.overrideMacAddr=t},expression:"overrideMacAddr"}})],1),e._v(" "),a("p",{staticClass:"section-line"},[a("label",{staticClass:"itemLabel"},[e._v("MTU ")]),a("ip-input",{attrs:{segments:1,disabled:e.editMode,segmentMaxSize:4,maxNumber:1e4},model:{value:e.mtu,callback:function(t){e.mtu=t},expression:"mtu"}})],1)])]),e._v(" "),a("div",{staticClass:"btnPanel"},[a("span",{staticStyle:{"margin-right":"5px"}},[a("el-button",{attrs:{type:"success"},on:{click:e.toggleEdit}},[e._v(e._s(e.editBtn))])],1),a("span",[a("button",{staticClass:"el-button el-button--danger",attrs:{type:"button"},on:{click:e.delCancelHandler}},[a("span",[e._v(e._s(e.DelCancelBtn))])])])])])])};n._withStripped=!0,a(9653),a(4916),a(5306);var s=a(9713),o=a.n(s),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"IpInput",attrs:{id:e.__idinput}},[e._l(e.segments,(function(t){return[a("span",{staticClass:"ipsegment"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.ipsegments[t-1],expression:"ipsegments[i-1]"}],key:t,attrs:{disabled:!e.disabled,num:t,id:"ipInput_"+e.__idinput+"_"+t,maxlength:e.segmentMaxSize,placeholder:e.disabled?e.placeholder_segments[t-1]:"",type:"text"},domProps:{value:e.ipsegments[t-1]},on:{input:[function(a){a.target.composing||e.$set(e.ipsegments,t-1,a.target.value)},e.inputIp],keydown:e.testChar,keyup:e.isEnd}})]),e.separator&&t<e.segments?a("span",{staticClass:"ipseparator"},[e._v("-")]):e._e()]}))],2)};r._withStripped=!0,a(9600),a(4603),a(9714),a(3123);const l={name:"ip-input",props:{value:{type:String},ip:{type:String,default:""},disabled:{type:Boolean,default:!1},separator:{type:Boolean,default:!1},allowedregexp:{type:String,default:"\\d"},port:{type:String,default:""},outline:{type:String,default:"around",validator:function(e){return"around"==e||"bottom"==e||"onsides"==e}},borderColor:{type:String,default:"#727378"},fontSize:{type:Number,default:12},textColor:{type:String,default:"#000"},maxNumber:{type:Number,default:255},segments:{type:Number,default:4,validator:function(e){return e<20}},segmentMaxSize:{type:Number,default:4,validator:function(e){return e<10}}},data:function(){return{__ip:"",__port:"",__idinput:0,ipsegments:[],allowedSymbols:"",placeholder_segments:[]}},created:function(){this.__ip=this.$parent._data.ip||this.ip,this.__port=this.$parent.port||this.port,this.allowedSymbols=new RegExp(""+this.allowedregexp),this.placeholder_segments=this.__ip.split("."),this.__idinput=(new Date).getTime()+Math.floor(1e3*Math.random()),this.ipsegments=this.value.split(".")},methods:{inputIp:function(){var e=this.ipsegments.join(".");this.$emit("input",e),this.value=e},isEnd:function(e){if(e.currentTarget.value.length==this.segmentMaxSize||9==e.keyCode){var t=parseInt(e.currentTarget.getAttribute("num"));t+1<=this.segments&&document.getElementById("ipInput_"+this.__idinput+"_"+(t+1)).focus()}},testChar:function(e){if(parseInt(e.currentTarget.value)>=this.maxNumber&&8!=e.keyCode&&46!=e.keyCode&&37!=e.keyCode&&e.preventDefault(),new RegExp("/[0-9]/"),!this.allowedSymbols.test(e.key)&&8!=e.keyCode&&46!=e.keyCode&&37!=e.keyCode)return e.preventDefault(),!1;this.testDel(e,e.currentTarget)},testDel:function(e,t){if(8==e.keyCode){var a=0;if(document.selection){var i=document.selection.createRange(),n=i.text.length;i.moveStart("character",-t.value.length),a=i.text.length-n}else a=t.selectionStart||"0"==t.selectionStart?t.selectionStart:0;if(0==a){var s=parseInt(e.currentTarget.getAttribute("num"));s-1>0&&document.getElementById("ipInput_"+this.__idinput+"_"+(s-1)).focus()}}}}};var c=a(3379),d=a.n(c),p=a(4696);d()(p.Z,{insert:"head",singleton:!1}),p.Z.locals;var u=a(1900),v=(0,u.Z)(l,r,[],!1,null,"6b5b1755",null);v.options.__file="src/views/Interfaces/components/IpInput.vue";const m=v.exports,f={name:"InterfaceBlock",data:function(){var e;return e={ipv4addr_placeholder:"127.0.0.1",ipv4addr:this.iData.IPv4address||"",ipvnetmask:this.iData.IPv4netmask||"",interfacePort:"",interfaceIndx:0,protocol:this.iData.Protocol||"",protocolType:this.iData[this.getLanName(this.iName)]||"",loading:!1,loader:null,mtu:this.iData.MTU||""},o()(e,"loading",!1),o()(e,"ipvnetmask_placeholder","255.255.255.0"),o()(e,"ipv4gateway",this.iData.IPv4gateway||""),o()(e,"ipv4gateway_placeholder","10.10.0.1"),o()(e,"resolv",this.iData.Resolv||""),o()(e,"overrideMacAddr",this.iData.OverrideMAC_address||""),o()(e,"protocols",[{title:"Static adress",val:"static"},{title:"Dynamic address",val:"dynamic"}]),o()(e,"currentColor",null),o()(e,"editMode",!1),o()(e,"editDialogVisible",!1),o()(e,"own",""),o()(e,"changeNum",0),e},props:{iData:{type:Object,default:{ipv4addr:!1,ipvnetmask:!1,protocol:"",protocolType:"",mtu:"",ipv4gateway:"",resolv:"",overrideMacAddr:""}},iName:{type:String,default:""},allInterfaces:{type:Array},isCollapsed:{type:Boolean},indx:{type:Number}},created:function(){this.interfaceIndx=this.indx},mounted:function(){this.interfacePort=this.iName},watch:{interfaceIndx:function(e,t){}},computed:{isCollapse:function(){return this.isCollapsed},editBtn:function(){return this.editMode?"Save":"Edit"},DelCancelBtn:function(){return this.editMode?"Cancel":"Delete"}},methods:{changeIndex:function(e,t){this.$bus.$emit("changeInterface",{newInterface:t.target.value,oldInterface:e})},toggleEdit:function(){this.editMode=!this.editMode,this.editMode||this.save()},delCancelHandler:function(){this.editMode?this.editMode=!1:this.delete()},delete:function(){var e=this;this.$confirm("Вы уверены что хотите удалить настройки?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then((function(){var t={name:e.iName,index:e.indx};e.$bus.$emit("removeInterface",t)})).catch((function(){}))},save:function(){var e={data:{interfaceFile:this.interfacePort,interfacePort:this.getLanName(this.interfacePort),protocolType:this.protocolType,protocol:this.protocol,ipv4addr:this.ipv4addr,ipvnetmask:this.ipvnetmask,ipv4gateway:this.ipv4gateway,resolv:this.resolv,overrideMacAddr:this.overrideMacAddr,mtu:this.mtu},path:this.$router.currentRoute.fullPath,action:"saveInterface"};this.$request({method:"post",data:e});var t=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});setTimeout((function(){t.close()}),2e3)},getLanName:function(e){return e.replace(".ini","").toUpperCase()},collapseBlock:function(){this.isCollapsed=!this.isCollapsed},open:function(){var e=this;this.$confirm("Вы уверены что хотите удалить настройки?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then((function(){e.$message({type:"success",message:"Delete completed"})})).catch((function(){e.$message({type:"info",message:"Delete canceled"})}))}},components:{IpInput:m}};var h=a(6411);d()(h.Z,{insert:"head",singleton:!1}),h.Z.locals;var g=(0,u.Z)(f,n,[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("label",{staticClass:"itemLabel"},[e._v("IPv4 address")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("label",{staticClass:"itemLabel"},[e._v("IPv4 netmask")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("label",{staticClass:"itemLabel"},[e._v("IPv4 gateway")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",[a("label",{staticClass:"itemLabel"},[e._v("Resolv")])])}],!1,null,"8dbb825c",null);g.options.__file="src/views/Interfaces/components/InterfaceBlock.vue";const b={name:"Page",data:function(){return{interfaces:[],inum:0,num:0,maxInterfaces:6,changeNum:0}},created:function(){this.showInterfaces(),this.$bus.$on("removeInterface",this.removeInterface),this.$bus.$on("changeInterface",this.changeInterface)},watch:{$route:"showInterfaces"},methods:{removeInterface:function(e){var t={path:this.$router.currentRoute.fullPath,action:"deleteInterface",data:{iName:e.name}};this.$request({method:"post",data:t}),this.interfaces.splice(e.index,1),this.$forceUpdate()},changeInterface:function(e){var t=this.interfaces[e.newInterface];this.interfaces[e.newInterface]=this.interfaces[e.oldInterface],this.interfaces[e.oldInterface]=t,this.$forceUpdate()},getCollapsed:function(){var e=this.num>0;return this.num++,e},showInterfaces:function(){var e=this,t={path:this.$router.currentRoute.fullPath,action:"getInterfaces"};this.$request({method:"post",data:t}).then((function(t){var a=t.data;for(var i in a)a[i].name=i,e.interfaces.push(a[i]);for(var n=0;n<e.interfaces.length;n++)console.log(e.interfaces[n]);for(var s in console.log("response= ",e.interfaces),e.inum=0,e.interfaces)e.inum++}))},addBlock:function(){if(this.inum<=this.maxInterfaces){this.inum++;var e=this.inum;this.interfaces.push({IPv4address:"",IPv4gateway:"",IPv4netmask:"",MTU:"",OverrideMAC_address:"",Protocol:"",Resolv:"",name:"lan"+e+".ini"}),this.$forceUpdate()}},isEnabled:function(e){return"disabled"!=e},getInterfaces:function(){return this.interfaces}},components:{InterfaceBlock:g.exports}};var x=a(3605);d()(x.Z,{insert:"head",singleton:!1}),x.Z.locals;var _=(0,u.Z)(b,i,[],!1,null,"442ad2d2",null);_.options.__file="src/views/Interfaces/index.vue";const I=_.exports}}]);